# Физические величины и единицы в онтологии курса химии

Версия: 1.0  
Цель: сделать онтологию **достаточной для формулировки и автоматической проверки задач** (стехиометрия, газы, растворы, энергетика), не смешивая химические сущности (вещество/реакция/процесс) с численными значениями.

---

## 1) Почему это нужно

Без явных физических величин и единиц онтология остаётся **описательной**: вы можете перечислить реакции и наблюдения, но не сможете корректно:

- задавать “дано/найти” в задачах (масса, объём, концентрация, температура);
- автоматически проверять ответы (включая конвертацию единиц);
- рассчитывать энергию/тепловой эффект, зависящий от **T**;
- решать задачи по газам (**P, V, T, n**) и растворам (**c, V, n**).

---

## 2) Принципиальное разделение: Quantity vs Measurement

### Quantity (тип величины)
Это **понятие**: масса, температура, количество вещества.

Примеры:
- `q:mass`
- `q:temperature`
- `q:amount`

### Measurement (конкретное значение)
Это **экземпляр**: 5 g, 298.15 K, 0.2 mol/L.

Пример:
```json
{
  "quantity": "q:mass",
  "value": 5,
  "unit": "unit:g"
}
```

---

## 3) Что включать в MVP (минимум для школьных задач)

### 3.1 Quantity (величины)
Рекомендуемый минимум:

- `q:mass` — масса
- `q:amount` — количество вещества
- `q:volume` — объём
- `q:concentration` — молярная концентрация (c)
- `q:temperature` — температура
- `q:pressure` — давление
- `q:energy` — энергия/теплота (для термохимии)
- `q:molar_mass` — молярная масса (обычно вычисляемая, но удобно иметь как quantity-type)
- `q:density` — плотность (опционально, но полезно для растворов)

### 3.2 Unit (единицы)
В MVP достаточно фиксированного набора единиц с коэффициентами к SI.

---

## 4) Где хранить величины в графе

Не добавляйте “массу” как атрибут вещества вообще всегда. Масса — это:

- либо **measurement** в задаче (given/unknown),
- либо **параметр процесса/сценария** (например, нагрев до T),
- либо **параметр состояния** (P, T для газа, концентрация раствора).

### Рекомендация структуры задачи
Задача (Problem) с тремя блоками:

- `given[]` — массив Measurement (что известно)
- `unknown[]` — какие Quantity надо найти (и к чему они относятся)
- `context` — ссылка на реакцию/процесс/условия

---

## 5) Форматы и правила ID

### 5.1 Namespace
- `q:` — quantity type
- `unit:` — unit
- `meas:` — measurement (экземпляр)
- (опционально) `prob:` — задача

### 5.2 Требование: значение + единица всегда вместе
Нельзя хранить голые числа без unit.

---

## 6) Пример (как это используется в задаче)

**Дано:** масса цинка 5 g, HCl в избытке.  
**Найти:** объём H₂ при н.у.

```json
{
  "id": "prob:stoich_zn_hcl_001",
  "reaction_id": "rx:gas_zn_hcl_001",
  "given": [
    { "id":"meas:1", "quantity":"q:mass", "value":5, "unit":"unit:g", "of":"sub:Zn_s" },
    { "id":"meas:2", "quantity":"q:condition", "value":"excess", "unit":"unit:enum", "of":"sub:HCl_aq" }
  ],
  "unknown": [
    { "quantity":"q:volume", "unit":"unit:L", "of":"sub:H2_g", "at":[
      { "quantity":"q:temperature", "value":273.15, "unit":"unit:K" },
      { "quantity":"q:pressure", "value":1.0, "unit":"unit:atm" }
    ]}
  ]
}
```

---

## 7) Как это стыкуется с энергетикой

Термодинамика реакции задаётся в Reaction (например, `thermo.deltaH_kJ_per_mol`), но вычисление часто зависит от:

- `q:temperature`
- `q:pressure` (реже для школьного уровня)

Поэтому температура/давление должны быть формально представлены как измерения (Measurements) в `conditions` или `scenario`.

---

## 8) Что дальше

Если вы хотите автоматическую проверку ответов и генерацию задач, следующий шаг:
- добавить **JSON Schema** для Problem/Measurement,
- и библиотеку конвертации единиц (или таблицу коэффициентов).

Файл JSON (рядом) содержит:
- словарь величин (`quantities`)
- словарь единиц (`units`) с пересчётом в SI
- структуры `Measurement` и `Problem` (как рекомендации)
- пример задачи
