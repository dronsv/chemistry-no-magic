# База заданий ОГЭ по химии

## Текущее состояние

**57 заданий** (часть 1, задания 1–19): 19 из демо-2025 + 38 из банков ФИПИ и sdamgia.ru (по 3 варианта на каждый номер).

**19 алгоритмов решения** — пошаговые инструкции для каждого номера задания с ключевыми фактами и типичными ловушками. Доступны как подсказка при решении и в разборе после проверки.

Часть 2 (задания 20–23) — развёрнутый ответ, не поддерживается автоматической проверкой.

## Источники данных

### Локальные файлы ФИПИ (2025)

Каталог: `public/hi_9_2025/`

| Файл | Содержание |
|------|------------|
| `ХИ-9 ОГЭ 2025_ДЕМО.pdf` | Демонстрационный вариант 2025: 23 задания + ответы + критерии оценки |
| `ХИ-9 ОГЭ 2025_СПЕЦ.pdf` | Спецификация: структура экзамена, таблица 4 (тип/уровень/баллы на задание) |
| `ХИ-9 ОГЭ 2025_КОДИФ.pdf` | Кодификатор: коды содержания, привязка к элементам школьной программы |

### Где брать дополнительные варианты

| Источник | URL | Что есть |
|----------|-----|----------|
| ФИПИ — Открытый банк заданий | https://fipi.ru/oge/otkrytyy-bank-zadaniy-oge | Официальные задания по номерам, без ключей |
| ФИПИ — Демоверсии ОГЭ | https://fipi.ru/oge/demoversii-specifikacii-kodifikatory | Демо + спец + кодификатор по годам (2020–2025) |
| sdamgia.ru (Решу ОГЭ) | https://chem-oge.sdamgia.ru/ | Крупнейший банк заданий с разбором, разбивка по номерам |
| chem-oge.sdamgia.ru каталог | https://chem-oge.sdamgia.ru/prob_catalog | Каталог заданий по темам/номерам |
| ФИПИ — Методические рекомендации | https://fipi.ru/metodicheskaya-kopilka/metod-rekomendatsii-dlya-podgotovki-k-oge | Анализ типичных ошибок, разбор сложных задач |

### Полезные разборы заданий

| Ресурс | URL | Что полезно |
|--------|-----|-------------|
| Разбор ДЕМО-2025 (sdamgia) | https://chem-oge.sdamgia.ru/test?id=12345 (поиск по тексту) | Подробные решения всех 23 заданий |
| YouTube — Химия ОГЭ | поиск «ОГЭ химия 2025 разбор демоверсии» | Видеоразборы с пояснениями учителей |
| Незнайка | https://neznaika.info/oge/chemistry/ | Тренировочные варианты с ответами |

## Структура экзамена ОГЭ-2025

**Общие параметры:** 23 задания, 3 часа, 38 первичных баллов.

### Часть 1 (задания 1–19): краткий ответ

| Задание | Формат ответа | Баллы | Уровень | Тема / что проверяет |
|---------|--------------|-------|---------|---------------------|
| 1 | select (2 из 5) | 1 | Б | Строение атома. Простое вещество vs элемент |
| 2 | input_cells (X, Y) | 1 | Б | Периодическая система: период и группа по электронной конфигурации |
| 3 | sequence (3 элемента) | 1 | Б | Закономерности: изменение свойств в периоде/группе |
| 4 | matching (А,Б,В → 1-4) | 2 | П | Степени окисления, валентность |
| 5 | select (2 из 5) | 1 | Б | Химическая связь, тип связи в веществах |
| 6 | select (2 из 5) | 1 | Б | Строение атома + закономерности |
| 7 | select (2 из 5, ordered) | 1 | Б | Классификация веществ (оксиды, основания, кислоты, соли) |
| 8 | select (2 из 5) | 1 | Б | Типы реакций: замещение, обмен, ОВР |
| 9 | matching (А,Б,В → 1-4) | 2 | П | Реакции обмена: реагенты → продукты |
| 10 | matching (А,Б,В → 1-4) | 2 | П | Типы реакций + ОВР |
| 11 | select (2 из 5) | 1 | Б | Условия/признаки протекания реакций |
| 12 | matching (А,Б,В → 1-4) | 2 | П | Качественные реакции, признаки реакций |
| 13 | select (2 из 5) | 1 | Б | Электролиты, ионы в растворе |
| 14 | select (2 из 5) | 1 | Б | Ионные уравнения, реакции ионного обмена |
| 15 | matching (А,Б → 1-3) | 2 | Б | ОВР: окислитель, восстановитель, электронный баланс |
| 16 | select (2 из 5) | 1 | Б | Классификация неорганических веществ: свойства |
| 17 | matching (А,Б,В → 1-4) | 2 | П | Химические свойства веществ разных классов |
| 18 | numeric (integer) | 1 | Б | Расчёты: молярная масса, массовая доля |
| 19 | numeric (tenths) | 1 | Б | Расчёты: массовая доля элемента в соединении |

### Часть 2 (задания 20–23): развёрнутый ответ

| Задание | Баллы | Что проверяет |
|---------|-------|---------------|
| 20 | 3 | Уравнения реакций по описанию (ОВР + электронный баланс) |
| 21 | 3 | Цепочка превращений (5 реакций) |
| 22 | 5 | Расчётная задача (по уравнению, выход, растворы) |
| 23 | 4 | Мысленный эксперимент: качественные реакции, распознавание веществ |

### Правила оценивания

- **1-балльные задания**: точное совпадение ответа
- **2-балльные (matching)**: все правильно = 2, одна ошибка = 1, больше = 0
- **select (unordered)**: порядок цифр не важен — сортируем и сравниваем
- **select (ordered)**: порядок цифр важен (задание 7)
- **numeric (tenths)**: допуск ±0.05

## Архитектура системы

### Файлы данных

```
data-src/exam/oge_tasks.json                — база заданий (57 заданий: 19 из демо-2025 + 38 из банков)
data-src/exam/oge_solution_algorithms.json  — алгоритмы решения для каждого номера задания (1–19)
```

### Типы

```
src/types/oge-task.ts                 — OgeTask, OgeAnswerType, OgeOption, OgeLeftItem, и т.д.
src/types/oge-solution.ts             — OgeSolutionAlgorithm (алгоритм, факты, ловушки)
```

### Пайплайн

```
scripts/build-data.mjs                — загрузка и копирование oge_tasks.json + oge_solution_algorithms.json
scripts/lib/generate-manifest.mjs     — entrypoints: oge_tasks, oge_solution_algorithms
src/types/manifest.ts                 — ManifestEntrypoints.oge_tasks, oge_solution_algorithms
src/lib/data-loader.ts                — loadOgeTasks(), loadOgeSolutionAlgorithms()
```

### Компоненты ввода ответа

```
src/features/exam/answers/
  OgeAnswerRouter.tsx     — маршрутизатор по answer_type
  SelectAnswer.tsx        — выбор N из списка (ordered/unordered)
  MatchingAnswer.tsx      — соответствие А,Б,В → 1,2,3,4 (таблица)
  SequenceAnswer.tsx      — расположить в порядке (слоты со стрелками)
  InputCellsAnswer.tsx    — подписанные ячейки для цифр (X, Y)
  NumericAnswer.tsx       — числовой ввод (целое или десятичное)
```

### Оценивание

```
src/features/exam/oge-scoring.ts      — gradeOgeTask(): корректная оценка по типу
```

### UI

```
src/features/exam/OgePractice.tsx     — режим тренировки по номерам заданий
src/features/exam/ExamPage.tsx        — два режима: «Задания ОГЭ» + «Пробный экзамен»
src/features/exam/exam.css            — стили для всех OGE-компонентов
```

## Привязка к компетенциям

| Компетенция | Задания |
|-------------|---------|
| periodic_table | 1, 2 |
| electron_config | 2, 6 |
| periodic_trends | 3, 6 |
| oxidation_states | 4 |
| bond_type | 5 |
| classification | 7, 16 |
| amphoterism_logic | 7 |
| reactions_exchange | 8, 9, 10, 11 |
| reactions_redox | 8, 10, 15 |
| gas_precipitate_logic | 9, 12 |
| qualitative_analysis_logic | 12, 17 |
| electrolyte_logic | 13, 14 |
| calculations_basic | 18, 19 |

## Формат записи в oge_tasks.json

```jsonc
{
  "task_id": "demo_2025_01",       // Уникальный ID: {source}_{year}_{number}
  "year": 2025,
  "source": "demo",                // "demo" | "real" | "reserve"
  "task_number": 1,                // 1–23
  "part": 1,                       // 1 или 2
  "question_ru": "Текст задания",
  "context_ru": "Общий контекст (для 18-19)", // опционально
  "answer_type": "select",         // тип ввода ответа
  "select_config": { "count": 2, "ordered": false },
  "options": [                     // для select и matching
    { "id": "1", "text": "..." }
  ],
  "items": [...],                  // для sequence
  "left_items": [...],             // для matching (левая колонка)
  "input_labels": ["X", "Y"],     // для input_cells
  "numeric_config": { "precision": "integer" },
  "correct_answer": "13",          // строка: цифры ответа
  "max_score": 1,
  "difficulty": "Б",               // "Б" | "П" | "В"
  "time_minutes": 3,
  "competencies": ["periodic_table"],
  "explanation_ru": "Объяснение..."
}
```

## Следующие шаги

### Приоритет 1: Расширение базы заданий
- [ ] Добавить задания из демоверсий 2020–2024 (по 19 заданий × 5 лет = ~95 заданий)
- [ ] Добавить задания из sdamgia.ru по номерам (по 10–20 на каждый номер)
- [ ] Каждое задание — уникальный `task_id`, дубликаты по тексту не добавлять

### Приоритет 2: Параметрические задачи (генерация)
- [ ] Для каждого номера задания создать шаблоны с переменными
- [ ] Задание 18–19: менять вещество, формулу, массы
- [ ] Задание 3: менять набор элементов
- [ ] Задание 4: менять вещества и степени окисления

### Приоритет 3: Типовые инструкции решения
- [ ] Для каждого номера задания: алгоритм решения (пошаговый)
- [ ] Типичные ошибки и ловушки
- [ ] Ключевые факты, которые нужно помнить

### Приоритет 4: Chemistry Notebook — структурированный ввод для части 2

Задания 20–23 сейчас используют `free_text` (textarea). Но ответы на них **структурированные**, а не произвольный текст. Это позволяет заменить textarea на интерактивный редактор с полуавтоматической проверкой.

#### Компоненты редактора

**Equation Builder** (задания 20, 21, 23):
- Ввод формул с авто-парсингом (использовать существующий `formula-parser.ts`)
- Отображение через `FormulaChip` (уже есть в `src/components/FormulaChip.tsx`)
- Расстановка коэффициентов с автоматической проверкой баланса атомов
- Для задания 20: таблица электронного баланса (элемент → от степени → до степени → число e⁻)
- Используем существующий `src/lib/oxidation-state.ts` для вычисления степеней окисления

**Calculation Workspace** (задание 22):
- Шаблон ответа: «Дано → Найти → Решение → Ответ»
- Встроенный калькулятор молярных масс (данные из `elements.json`)
- Проверка пропорции по уравнению реакции
- Проверка промежуточных и финального ответа

**Experiment Description** (задание 23):
- Выбор реактивов из списка (данные из `qualitative_reactions.json`)
- Для каждого шага: что наблюдаем (из базы качественных реакций)
- Текстовое описание — единственная часть, проверяемая только вручную

#### Что проверяемо автоматически

| Элемент ответа | Автопроверка | Источник данных |
|----------------|-------------|-----------------|
| Баланс атомов в уравнении | Да | `formula-parser.ts` |
| Коэффициенты | Да | сравнение с эталоном |
| Электронный баланс | Да | `oxidation-state.ts` |
| Степени окисления | Да | `oxidation-state.ts` |
| Молярная масса | Да | `elements.json` |
| Расчёт по пропорции | Да | сравнение результата |
| Текстовое описание наблюдений | Нет | требует ручной проверки |

#### Зависимости от существующих модулей

- `src/lib/formula-parser.ts` — парсинг формул в {element: count}
- `src/lib/oxidation-state.ts` — вычисление степеней окисления
- `src/components/FormulaChip.tsx` — отображение формул
- `data-src/elements/elements.json` — атомные массы для молярных масс
- `data-src/rules/qualitative_reactions.json` — реагенты и наблюдения
- `src/features/exam/oge-scoring.ts` — расширить для structured-ответов

#### Новый answer_type

Добавить в `OgeAnswerType`:
```ts
| 'equation_balance'    // задание 20: уравнения + электронный баланс
| 'reaction_chain'      // задание 21: цепочка превращений
| 'calculation_steps'   // задание 22: расчётная задача по шагам
| 'experiment_plan'     // задание 23: план эксперимента
```

Каждый тип — отдельный React-компонент в `src/features/exam/answers/`, маршрутизация через `OgeAnswerRouter`.
